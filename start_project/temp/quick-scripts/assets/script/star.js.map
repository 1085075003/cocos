{"version":3,"sources":["star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","game","default","serializable","getPlayerDistance","playerPos","player","getPosition","dist","pDistance","node","position","onPicked","spawnNewStar","gainScore","destroy","update","dt","opacityRatio","timer","starDuration","minOpacity","opacity","Math","floor","onLoad","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,WAASF,GAAGG,SADP;;AAGLC,cAAY;AACVC,gBAAY,CADF;AAEVC,UAAM;AACJC,eAAS,IADL;AAEJC,oBAAc;AAFV;AAFI,GAHP;;AAWLC,qBAAmB,6BAAY;AAC7B,QAAIC,YAAY,KAAKJ,IAAL,CAAUK,MAAV,CAAiBC,WAAjB,EAAhB;AACA,QAAIC,OAAOb,GAAGc,SAAH,CAAa,KAAKC,IAAL,CAAUC,QAAvB,EAAiCN,SAAjC,CAAX;AACA,WAAOG,IAAP;AACD,GAfI;;AAiBLI,YAAU,oBAAY;AACpB,SAAKX,IAAL,CAAUY,YAAV;;AAEA,SAAKZ,IAAL,CAAUa,SAAV;;AAEA,SAAKJ,IAAL,CAAUK,OAAV;AACD,GAvBI;;AAyBLC,UAAQ,gBAAUC,EAAV,EAAc;AACpB,QAAI,KAAKb,iBAAL,KAA2B,KAAKJ,UAApC,EAAgD;AAC9C,WAAKY,QAAL;AACA;AACD;;AAED,QAAIM,eAAe,IAAI,KAAKjB,IAAL,CAAUkB,KAAV,GAAgB,KAAKlB,IAAL,CAAUmB,YAAjD;AACA,QAAIC,aAAa,EAAjB;AACA,SAAKX,IAAL,CAAUY,OAAV,GAAoBD,aAAaE,KAAKC,KAAL,CAAWN,gBAAgB,MAAMG,UAAtB,CAAX,CAAjC;AACD,GAlCI;;AAoCL;;AAEAI,QAtCK,oBAsCK,CAET,CAxCI;AA0CLC,OA1CK,mBA0CI,CAER;AA5CI;;AA8CL;AA9CJ","file":"star.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n      pickRadius: 0,\n      game: {\n        default: null,\n        serializable: false\n      }\n    },\n\n    getPlayerDistance: function () {\n      var playerPos = this.game.player.getPosition();\n      var dist = cc.pDistance(this.node.position, playerPos);\n      return dist;\n    },\n\n    onPicked: function () {\n      this.game.spawnNewStar();\n\n      this.game.gainScore();\n\n      this.node.destroy();\n    },\n\n    update: function (dt) {\n      if (this.getPlayerDistance() < this.pickRadius) {\n        this.onPicked();\n        return;\n      }\n\n      var opacityRatio = 1 - this.game.timer/this.game.starDuration;\n      var minOpacity = 50;\n      this.node.opacity = minOpacity + Math.floor(opacityRatio * (255 - minOpacity));\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n  \n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}